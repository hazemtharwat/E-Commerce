import{a as V,b as q,c as z,d as P,e as R,h as U,i as H,k as J}from"./chunk-H2L25O2J.js";import{q as C,r as M,s as I}from"./chunk-OCICKMGW.js";import{e as d,s as _,v as w,w as B,x as O}from"./chunk-DRYUZIKG.js";import{b as G,c,e as L,f as N,h as T,i as k,j as A,k as D,l as E,m as j}from"./chunk-I5I3ZJ5O.js";import"./chunk-R3OPAVVT.js";import{h as F,s as y}from"./chunk-PF5KSIJM.js";import{F as f,Hb as p,Nb as S,Ob as x,Qa as m,Ra as v,T as g,Z as n,ca as h,hb as a,k as l,qb as i,rb as o,sb as s,xb as b}from"./chunk-Y4WIQVIO.js";var K=(()=>{class t{constructor(){this.userName=new l(""),this.userToken=new l("")}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275prov=g({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Fe=(()=>{class t{constructor(r){this.fb=r,this.userinfo="",this.loginData=[],this._loginservice=n(R),this._Loding=n(C),this.router=n(y),this._messageService=n(d),this._userData=n(K)}ngOnInit(){this.loginForm=this.fb.group({username:["",[c.required]],password:["",[c.required]]})}get loginDataControls(){return Object.keys(this.loginForm.controls)}submitLogin(){this.loginForm.valid?(this.login(this.loginForm.value),this.userinfo=this.loginForm.value.username,localStorage.setItem("username",this.userinfo),console.log(this.userinfo)):this.loginForm.markAllAsTouched()}login(r){this._Loding.show(),this._loginservice.login(r).pipe(f(1)).subscribe({next:e=>{this._Loding.hide(),this._userData.userName.next(e.username);let u=localStorage.setItem("usertoken",e.token);this.router.navigate(["/home"]),this.success("success","success","success")},error:e=>{this.success("error","error",e.error.error),this._Loding.hide()}})}success(r,e,u){this._messageService.add({severity:r,summary:u,detail:e})}static{this.\u0275fac=function(e){return new(e||t)(v(D))}}static{this.\u0275cmp=h({type:t,selectors:[["app-login"]],standalone:!0,features:[S([d]),x],decls:20,vars:4,consts:[[1,"container","mx-auto"],[1,"text-2xl","font-bold","pl-3","mt-8","mb-3","text-red-600"],[3,"ngSubmit","formGroup"],[1,"my-3"],[1,"pi","pi-user"],["pInputText","","placeholder","\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645","formControlName","username",1,"w-25",3,"autofocus"],["pInputText","","placeholder","\u0643\u0644\u0645\u0647 \u0627\u0644\u0645\u0631\u0648\u0631","formControlName","password",1,"w-25",3,"autofocus"],[1,"w-3","mt-3","p-button","p-component","text","text-center","btnToCart"],[1,"card","flex","justify-content-center","gap-2"],["bdColor","rgba(0,0,0,0.8)","size","medium","color","#eb4e00","type","fire",3,"fullScreen"],[2,"color","white"]],template:function(e,u){e&1&&(i(0,"section")(1,"div",0)(2,"h1",1),p(3," Login "),o(),i(4,"form",2),b("ngSubmit",function(){return u.submitLogin()}),i(5,"p-inputGroup",3)(6,"p-inputGroupAddon"),s(7,"i",4),o(),s(8,"input",5),o(),i(9,"p-inputGroup",3)(10,"p-inputGroupAddon"),s(11,"i",4),o(),s(12,"input",6),o(),i(13,"button",7),p(14," Login "),o()()()(),i(15,"div",8),s(16,"p-toast"),o(),i(17,"ngx-spinner",9)(18,"p",10),p(19," Loading... "),o()()),e&2&&(m(4),a("formGroup",u.loginForm),m(4),a("autofocus",!0),m(4),a("autofocus",!0),m(5),a("fullScreen",!0))},dependencies:[E,T,G,L,N,q,V,P,z,O,B,j,k,A,w,F,H,U,J,I,M,_],styles:[".btnToCart[_ngcontent-%COMP%]{display:inline-block;width:100%;background-color:#00a013;color:#ededed;text-align:center!important;padding:.5rem;border-radius:5px;-webkit-border-radius:5px;-moz-border-radius:5px;-ms-border-radius:5px;-o-border-radius:5px}"]})}}return t})();export{Fe as LoginComponent};
